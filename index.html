<!DOCTYPE html>
window.onload = () => {
    const log = document.getElementById('console-log');
    log.innerHTML += `<br>> [SYSTEM] Roadmap: SHA-3 Hashing support is currently being funded.`;
    log.innerHTML += `<br>> [SYSTEM] Want this feature? Fund it here: [Insert your Algora Issue Link]`;
};
<div class="text-center">
    <span class="badge rounded-pill bg-info text-dark">
        üîí 100% Client-Side: No files are uploaded to any server.
    </span>
</div>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bulk Evidence Hash Reporter</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

    <style>
        /* Dark Mode Variables */
        :root {
            --bg-color: #f4f6f9;
            --text-color: #333333;
            --card-bg: #ffffff;
            --table-head: #343a40;
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --card-bg: #1e1e1e;
            --table-head: #000000;
        }

        body { 
            background-color: var(--bg-color); 
            color: var(--text-color);
            padding: 20px; 
            font-family: 'Segoe UI', sans-serif; 
            transition: 0.3s;
        }
        
        .drop-zone {
            border: 2px dashed #0d6efd;
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .table-responsive {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-height: 60vh;
        }
        
        thead th { position: sticky; top: 0; background: var(--table-head) !important; color: white; }
        .hash-cell { font-family: 'Courier New', monospace; font-size: 0.85rem; }
    </style>
</head>
<body>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <button id="theme-toggle" class="btn btn-outline-secondary">üåô Dark Mode</button>
        
        <div>
            <a href="https://github.com/amithmandassociates-oss/hash-report-tool" 
               class="btn btn-primary btn-sm">‚ö° Analyze Code with Gemini</a>
        </div>
    </div>

    <div class="container-fluid">
        <h2 class="text-center">Bulk Digital Evidence Hash Reporter</h2>
        <p class="text-center text-muted">Forensic Hash Generation for Case Records</p>

        <div class="drop-zone" id="dropZone">
            <h4>Drag & Drop Bulk Files Here</h4>
            <input type="file" id="fileInput" multiple hidden>
        </div>

        <div class="d-flex justify-content-between mb-3 flex-wrap gap-2">
            <div>
                <span id="counter" class="badge bg-secondary">Files: 0</span>
                <span id="statusMessage" class="ms-2">Ready</span>
            </div>
            <div class="btn-group">
                <button class="btn btn-outline-success btn-sm" onclick="downloadCSV()">CSV</button>
                <button class="btn btn-outline-success btn-sm" onclick="downloadExcel()">Excel</button>
                <button class="btn btn-outline-danger btn-sm" onclick="downloadPDF()">PDF</button>
                <button class="btn btn-dark btn-sm" onclick="clearTable()">Clear</button>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover" id="hashTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>File Name</th>
                        <th>Size</th>
                        <th>MD5</th>
                        <th>SHA-1</th>
                        <th>SHA-256</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        /* THEME TOGGLE LOGIC */
        const toggleBtn = document.getElementById('theme-toggle');
        toggleBtn.addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme');
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
                toggleBtn.textContent = 'üåô Dark Mode';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                toggleBtn.textContent = '‚òÄÔ∏è Light Mode';
            }
        });

        /* HASHING LOGIC */
        const fileInput = document.getElementById('fileInput');
        const tableBody = document.getElementById('tableBody');
        let fileQueue = [];
        let totalFiles = 0;

        document.getElementById('dropZone').onclick = () => fileInput.click();
        fileInput.onchange = (e) => handleFiles(e.target.files);

        function handleFiles(files) {
            // Around Line 140
function handleFiles(files) {
    if (!files.length) return;

    // INSERT LOGIC HERE:
    const log = document.getElementById('console-log');
    const timestamp = new Date().toLocaleTimeString();
    log.innerHTML += `<br>> [${timestamp}] Input Detected: ${files.length} file(s) added to queue.`;
    log.scrollTop = log.scrollHeight; // Keeps the newest log visible

    // Original loop continues below...
    Array.from(files).forEach(file => {
        totalFiles++;
        // ... rest of code
            Array.from(files).forEach(file => {
                totalFiles++;
                const rowId = `row-${totalFiles}`;
                tableBody.insertAdjacentHTML('beforeend', `
                    <tr id="${rowId}">
                        <td>${totalFiles}</td>
                        <td>${file.name}</td>
                        <td>${(file.size/1024).toFixed(2)} KB</td>
                        <td class="hash-cell">...</td>
                        <td class="hash-cell">...</td>
                        <td class="hash-cell">...</td>
                    </tr>
                `);
                fileQueue.push({ file, rowId });
            });
            processQueue();
        }

        async function processQueue() {
            if (fileQueue.length === 0) return;
            const { file, rowId } = fileQueue.shift();
            const reader = new FileReader();
            reader.onload = function(e) {
                const wordArray = CryptoJS.lib.WordArray.create(e.target.result);
                document.getElementById(rowId).cells[3].innerText = CryptoJS.MD5(wordArray).toString();
                document.getElementById(rowId).cells[4].innerText = CryptoJS.SHA1(wordArray).toString();
                document.getElementById(rowId).cells[5].innerText = CryptoJS.SHA256(wordArray).toString();
                processQueue();
            };
            reader.readAsArrayBuffer(file);
        }

        /* EXPORT FUNCTIONS */
        function downloadCSV() {
            let csv = [];
            document.querySelectorAll("table tr").forEach(row => {
                let cols = Array.from(row.querySelectorAll("td, th")).map(c => `"${c.innerText}"`);
                csv.push(cols.join(","));
            });
            downloadFile(csv.join("\n"), "Report.csv", "text/csv");
        }

        function downloadExcel() {
            const wb = XLSX.utils.table_to_book(document.getElementById('hashTable'));
            XLSX.writeFile(wb, "Evidence_Report.xlsx");
        }

       function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('l', 'pt'); // 'l' for landscape to fit hash columns
    
    // 1. Add your Logo (Base64 string)
    // Parameters: imgData, format, x, y, width, height
    const imgData = 'YOUR_BASE64_STRING_HERE'; 
    try {
        doc.addImage(imgData, 'PNG', 40, 20, 50, 50); 
    } catch (e) {
        console.log("Logo not found, skipping image addition.");
    }

    // 2. Add Firm Title and Report Name
    doc.setFontSize(18);
    doc.text("Amith M and Associates", 100, 40);
    doc.setFontSize(12);
    doc.setTextColor(100);
    doc.text("Digital Evidence Hash Report", 100, 60);
    
    // 3. Add Date/Time of Report
    const date = new Date().toLocaleString();
    doc.setFontSize(10);
    doc.text(`Generated on: ${date}`, 40, 90);

    // 4. Generate the Table
    doc.autoTable({ 
        html: '#hashTable', 
        startY: 110,
        theme: 'striped',
        headStyles: { fillColor: [52, 58, 64] }, // Dark header
        styles: { fontSize: 8 } // Smaller font to fit long hashes
    });

    doc.save("Evidence_Hash_Report.pdf");
}

        function downloadFile(content, fileName, mimeType) {
            const a = document.createElement("a");
            a.href = URL.createObjectURL(new Blob([content], { type: mimeType }));
            a.download = fileName;
            a.click();
        }

        function clearTable() { if(confirm("Clear list?")) location.reload(); }
    </script>

    </body>
    <footer class="mt-5 p-4 border-top text-center bg-light">
    <div class="container">
        <p class="mb-1"><strong>Amith M and Associates - Forensic Suite</strong></p>
        <div class="d-flex justify-content-center gap-3">
            <a href="https://github.com/sponsors/yourusername" class="text-decoration-none">üíñ Sponsor Development</a>
            <span class="text-muted">|</span>
            <a href="mailto:your@email.com" class="text-decoration-none">‚öñÔ∏è Request Commercial License</a>
            <span class="text-muted">|</span>
            <a href="https://yourfirm.com/consulting" class="text-decoration-none">üë®‚Äç‚öñÔ∏è Expert Witness Services</a>
        </div>
        <p class="mt-3 small text-muted">Licensed for individual use. Corporate use requires a Commercial License.</p>
    </div>
</footer>
</html>




